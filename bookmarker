from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.options import Options
from webdriver_manager.chrome import ChromeDriverManager
import time

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø¬Ø±Ø§ÛŒ Ø¨Ø¯ÙˆÙ† Ú¯Ø±Ø§ÙÛŒÚ©
options = Options()
options.add_argument("--headless")
options.add_argument("--disable-gpu")
options.add_argument("--window-size=1920x1080")

# Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±
driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()), options=options)

# Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ù„Ø§Ú¯ÛŒÙ†
driver.get("https://107112.samanpl.ir/Account/Login")

# ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±
username = "your username"
password = "your password"

# Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÙÛŒÙ„Ø¯Ù‡Ø§ Ùˆ Ù„Ø§Ú¯ÛŒÙ†
username_input = driver.find_element(By.ID, "UserName")
password_input = driver.find_element(By.ID, "Password")
username_input.send_keys(username)
password_input.send_keys(password)

# Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ ÙˆØ±ÙˆØ¯
login_button = driver.find_element(By.XPATH, '//button[@type="submit"]')
login_button.click()
print("Login âœ…")

# ØµØ¨Ø± Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯ Ø´Ø¯Ù†
time.sleep(3)

# Ø±ÙØªÙ† Ø¨Ù‡ Ø¨Ø®Ø´ Ø§Ù…Ø§Ù†Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ø±ÛŒ
driver.get("https://107112.samanpl.ir/borrow/currentborrows/MyBorrows")
borrow_input = driver.find_element(By.ID, 'current')
borrow_input.click()
print("borrow part ğŸ’»")
time.sleep(6)

# Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¹Ù†ÙˆØ§Ù† Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ (Ù…Ø«Ù„Ø§Ù‹ ØªÚ¯â€ŒÙ‡Ø§ÛŒ <td> ÛŒØ§ <a> ÛŒØ§ Ú©Ù„Ø§Ø³ Ø®Ø§Øµ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ú©ØªØ§Ø¨â€ŒÙ‡Ø§)
book_titles = driver.find_elements(By.XPATH, '//*[@id="myTable"]/tbody/tr/td[3]')  # Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø³ØªÙˆÙ† Ø³ÙˆÙ… Ø§Ø³Ù… Ú©ØªØ§Ø¨Ù‡

print("Your borrow booksğŸ“š:")
for book in book_titles:
    print("- " + book.text)
print("Finished âœ…")

# Ø¨Ø³ØªÙ† Ù…Ø±ÙˆØ±Ú¯Ø±
driver.quit()
