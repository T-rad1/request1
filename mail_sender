# email_sender.py
import yagmail

def send_book_list_email(books, receiver_email, sender_email, app_password):
    """
    Ø§Ø±Ø³Ø§Ù„ Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ Ø¨Ù‡ Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø´Ø®Øµâ€ŒØ´Ø¯Ù‡.
    
    Parameters:
    - books: list[str] â†’ Ù„ÛŒØ³Øª Ù†Ø§Ù… Ú©ØªØ§Ø¨â€ŒÙ‡Ø§
    - receiver_email: str â†’ Ø§ÛŒÙ…ÛŒÙ„ Ø¯Ø±ÛŒØ§ÙØªâ€ŒÚ©Ù†Ù†Ø¯Ù‡
    - sender_email: str â†’ Ø§ÛŒÙ…ÛŒÙ„ ÙØ±Ø³ØªÙ†Ø¯Ù‡
    - app_password: str â†’ Ø±Ù…Ø² Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø¬ÛŒÙ…ÛŒÙ„
    """
    #email_body = ":Ù†Ø§Ù… Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø´Ù…Ø§ Ù‚Ø±Ø¶ Ú¯Ø±ÙØªÙ‡â€ŒØ§ÛŒØ¯\n\n" + "\n".join(f"- {title}" for title in books)
    email_body = "ğŸ“š Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø§Ù†Øªâ€ŒÚ¯Ø±ÙØªÙ‡â€ŒØ´Ø¯Ù‡:\n\n"
    for book_name, due_date in books:  # Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØªØ§Ù¾Ù„â€ŒÙ‡Ø§
        email_body += f"{book_name} - Ù…ÙˆØ¹Ø¯ Ø¨Ø§Ø²Ú¯Ø´Øª: {due_date}\n"
    
    yag = yagmail.SMTP(user=sender_email, password=app_password)
    yag.send(to=receiver_email, subject="ğŸ“š Ù„ÛŒØ³Øª Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø§Ù†Øªâ€ŒÚ¯Ø±ÙØªÙ‡â€ŒØ´Ø¯Ù‡", contents=email_body)
    print("ğŸ“¨ Ø§ÛŒÙ…ÛŒÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯!")
    
